<template>
  <div class="turn-indicator">
    <div class="turn-indicator__player" :class="turn.allegiance">
      <template v-if="turn.allegiance==='blue' && turn.role==='codemaster'">{{t("blue codemaster's turn")}}</template>
      <template v-if="turn.allegiance==='red' && turn.role==='codemaster'">{{t("red codemaster's turn")}}</template>
      <template v-if="turn.allegiance==='blue' && turn.role==='codebreaker'">{{t("blue codebreaker's turn")}}</template>
      <template v-if="turn.allegiance==='red' && turn.role==='codebreaker'">{{t("red codebreaker's turn")}}</template>
    </div>
    <div class="turn-indicator__code" v-if="turn.role === player.role">
      <span>
        <input type="text" v-model="code.word" @input="updateWord()" :disabled="code.select!=='word'" autofocus="true" :placeholder="t('Type your codeword')">
      </span>
      <span v-if="turn.role==='codebreaker' || code.select!=='word'">
        {{code.count}}
      </span>
    </div>
    <div class="turn-indicator__code" v-else>
      <template v-if="turn.role==='codemaster'">{{t('Wait for codeword')}}</template>
      <template v-if="turn.role==='codebreaker'">{{t('Wait selection')}}</template>
    </div>
  </div>
</template>

<script>
import {eventBus} from '../../main';  
export default {
  props: {
    player: Object,
    turn: Object,
    code: Object
  },
  methods: {
    updateWord() {
      const self = this;
      self.vibrate(20);
      eventBus.$emit('codeChanged',{
        word: self.code.word,
        select: self.code.select,
        count: self.code.count
      });
    }
  },
  locales: {
    pt_br: {
      "blue codemaster's turn": "turno do codemaster azul",
      "red codemaster's turn": "turno do codemaster vermelho",
      "blue codebreaker's turn": "turno do codebreaker azul",
      "red codebreaker's turn": "turno do codebreaker vermelho",
      "Wait for codeword": "Aguarde o código",
      "Wait selection": "Aguarde a escolha",
      "Type your codeword": "Digite seu código"

    }
  }
};
</script>
